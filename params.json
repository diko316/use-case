{
  "name": "Use-case",
  "tagline": "UML Use-case implementation for large Applications",
  "body": "# Use-case\r\n\r\nThis library aims to effectively plan the software development by following [UML Use-case](https://en.wikipedia.org/wiki/Use_case) based from User Stories. Use-case manifests will be detailed later by adding use-case relationships and activity workflows using [Apptivity](https://github.com/diko316/apptivity) package.\r\n\r\n\r\n## Installation\r\nUse-case is packaged by npm. Source can be found in [github repository](https://github.com/diko316/use-case).\r\n\r\n```sh\r\nnpm install use-case --save\r\n```\r\n\r\n## Usage\r\n\r\nTo better understand how to use this library, we are going to run through a quick start guide.\r\n\r\n### Quick Start Guide\r\n\r\n#### 1. Translate User Stories into Use-case manifest using [use-case](https://www.npmjs.com/package/use-case) definition objects.\r\nThe following are the User Stories gathered from the **My Auth Website** app.\r\n\r\n1. As a **visitor**, I can **visit** the **public** area of the system.\r\n2. As a **visitor** or **guest**, I can **login** and change my role into **admin**.\r\n3. As an **admin**, I can **logout** and change my role back into **visitor**.\r\n4. As an **admin**, I can **update** my profile in the **users** control panel.\r\n\r\nBelow is the sample translation of User Stories into Use-cases using [use-case](https://www.npmjs.com/package/use-case) definition object.\r\n\r\n```javascript\r\nvar USECASE = require(\"use-case\");\r\nUSECASE.system(\"My Auth Website\").\r\n        as(\"guest\").\r\n            emulating(\"visitor\").\r\n        as(\"visitor\").\r\n            accessing(\"public area\").\r\n                can(\"visit web pages\").\r\n                can(\"login\").\r\n                    soThat(\"I can change my role into admin.\",\r\n                    \t\t\"Or, change role depending on what is assigned after server authentication.\").\r\n        as(\"admin\").\r\n            accessing(\"private area\").\r\n                can(\"logout\").\r\n                    soThat(\"I can be a visitor/guest again.\").\r\n            accessing(\"users control\")\r\n                can(\"update my profile\").\r\n                    soThat(\"I can customize my something-whatever.\");\r\n```\r\n\r\n\r\n#### 2. Further detail the Use-cases and Activities.\r\nUse-cases can be defined further into `subjects` namespace and specific `use-case`. When usecases and it's relationships are all defined, their equivalent activities should also be defined to complete the whole Use-case definitions. \r\n\r\n```javascript\r\nvar myApp = USECASE.system(\"My auth website\");\r\n\r\n// don't worry, system, subject, usecase, and actors are case-insensitive\r\nmyApp.subject(\"Public area\").\r\n\t\tusecase(\"navigate\").\r\n        usecase(\"login\").\r\n        \textend(\"get auth info\"),\r\n            include(\"authenticate\");\r\n\r\n// here you're going to define activity of the defined usecases\r\nmyApp.activity(\"public area\", \"navigate\").\r\n\t\tinput(\"choosePage\").\r\n        action(\"navigate\");\r\n\r\nmyApp.activity(\"public area\", \"login\").\r\n\t\taction(\"validate\");\r\n\r\nmyApp.activity(\"public area\", \"get auth info\").\r\n\t\taction(\"showLoginPage\").\r\n        input(\"authData\");\r\n\r\nmyApp.activity(\"public area\", \"authenticate\").\r\n\t\taction(\"authenticate\").\r\n        \thandler(function (input) {\r\n            \tconsole.log(\"authenticating to backend? \", input);\r\n            \treturn client.authToBackend(input);\r\n            }).\r\n\t\taction(\"setAuthToken\");\r\n```\r\n\r\n> The example above is for demo purposes only. That is why, Activity definitions and implementations were defined in one script file. The best practice in coding [Apptivity](https://www.npmjs.com/package/apptivity) is to split definitions (like the `action(\"setAuthToken\");` line above.) from implementations using [Apptivity.task(name:String, runner:Function)](https://www.npmjs.com/package/apptivity#namedTask) method in a separate implementation script file.\r\n\r\n#### 3. Run a completely defined Use-case.\r\nComplete Use-cases are use-cases having complete definitions of Actor, Subject, optional Usecase relationships, and Activity within the System. Use-cases cannot run using the code below if it is not completely defined.\r\n\r\n```javascript\r\n\r\nUSECASE(\"My auth website://guest@public area/visit web pages\").\r\n\ton(\"state-change\",\r\n    \tfunction (process, state) {\r\n        \tconsole.log(\"current state \", state.toJS());\r\n        }).\r\n    on(\"prompt\",\r\n    \tfunction (process, action, initialInput) {\r\n        \tconsole.log(\"what to do with prompts? \", action, initialInput);\r\n            process.answer({ value: \"my answer to this prompt.\" });\r\n        }).\r\n    run({ page: \"/about_us.html\" }).\r\n        then(function (result) {\r\n            console.log(\"showing about us? \", result);\r\n            return result;\r\n        },\r\n        function (error) {\r\n            console.log('yes! an error!', error);\r\n            return Promise.reject(error);\r\n        });\r\n\r\n```\r\n\r\n## API\r\n\r\n### Main USECASE `Function` and method properties.\r\n\r\nThe following are the methods defined in `USECASE` object found in the examples above.\r\n\r\n##### USECASE(url:*String*):*Process*\r\nCreates an instance of a Use-case `Process` using system, actor, subject and usecase info extracted from the `url` parameter.\r\n\r\n`url` string syntax is `[system-name]://[actor]@[subject]/[usecase]`.\r\n\r\n\r\n##### USECASE.system(name:*String*, [contextCallback:*Function*]):*SystemDefinition*\r\nDefines a `system` named after its `name` parameter. If system do not exist, the method will create one. Optional `contextCallback` parameter is used to access concurrent `system` definitions, preprocess, and configurations inside the callback function.\r\n\r\n\r\nExample of organizing modules in CommonJS \r\n\r\n\r\n**lib/my-website/definitions.js**\r\n\r\n```javascript\r\nconst USECASE = require(\"use-case\");\r\n\r\nUSECASE.system(\"my-website\",\r\n\t\t\trequire(\"./definition.js\"));\r\n\r\n// ... and other definitions\r\n```\r\n\r\n**lib/my-website/route/guest.js**\r\n```javascript\r\nmodule.exports = function(system) {\r\n\r\nsystem.as(\"guest\").\r\n            emulating(\"visitor\");\r\n};\r\n\r\n```\r\n\r\n##### USECASE.subscribe(filter:*String*, event:*String|RegExp*, handler:Function):*Function*\r\nSubscribes a Process `event` filtered by `filter` parameter.\r\n\r\n`filter` parameter syntax is: `\"system=[system-name], actor=[actor-name], subject=[subject-name], usecase|use-case=[use-case-name]\"`. All comma-separated `\"name=value\"` pairs are optional. If `filter` string is malformed, event subscription matches all running process.\r\n\r\nAvailable events are the following:\r\n\r\n> **process-create** (**process**:*Process*)\r\n> - `\"process-create\"` event is dispatched after Process is instantiated.\r\n>\r\n> **process-destroy** (**process**:*Process*)\r\n> - `\"process-destroy\"` event is dispatched before Process is destroyed undergoing destruction phase.\r\n>\r\n> **process-start** (**process**:*Process*, **url**:*String*, **input**:*Mixed*)\r\n> - `\"process-start\"` event is dispatched before use-case process starts running.\r\n>\r\n> **process-end** (**process**:*Process*, **url**:*String*, **output**:*Mixed*)\r\n> - `\"process-end\"` event is dispatched after use-case process has finished running.\r\n>\r\n> **state-change** (**process**:*Process*, **state**:*Immutable*)\r\n> - `\"state-change\"` event is dispatched when use-case process changes state data. State data are [Immutable](https://www.npmjs.com/package/immutable) objects based from published events of a running [apptivity](https://www.npmjs.com/package/apptivity) workflow session.\r\n>\r\n>  The immutable state data object has the following properties:\r\n\r\n```javascript\r\nvar stateData = Immutable.fromJS({\r\n\turl: \"[system-name]://[actor]@[subject]/[usecase]\",\r\n\tactivity: \"[system-name]://[subject]/[usecase]\",\r\n    action: \"[apptivity-action-name]\",\r\n    state: \"[apptivity-fsm-state]\",\r\n    input: { ... [apptivity action input] },\r\n  \tdata: { ... [apptivity action output] }\r\n});\r\n```\r\n\r\n> **prompt** (**process**:*Process*, **action**:*String*, **initialInput**:*Mixed*)\r\n> - `\"prompt\"` event is dispatched when currently running workflow session is waiting for an `input`. It can be answered by calling `process.answer(myInput)` or manually calling `workflowSession.answer(myInput)` if workflow session is accessible.\r\n>\r\n> **answer** (**process**:*Process*, **action**:*String*, **newInput**:*Mixed*)\r\n> - `\"answer\"` event is dispatched when workflow session `input` has been answered.\r\n>\r\n\r\n\r\n##### USECASE.activity(activityName:*String*):*Activity*\r\n\r\nDefines an `Activity` used as option parameters of `condition` action or sub-processe parameters of `fork` action.\r\n\r\nThis method is an alias of [apptivity.activity(name:String)](https://www.npmjs.com/package/apptivity#workflowactivityactivitynamestringactivity) .\r\n\r\n### System Definition Object\r\n\r\n#### systemDefinition.as(actorName:*String*, [contextCallback:*Function*]):*ActorDefinition*\r\nCreates an Actor if specified `actorName` actor do not exist and returns an `actorDefinition` object for chain-calling actor definitions.\r\n\r\nIf `contextCallback` optional parameter is provided, it will be called with `ActorDefinition` object of `actorName` for further actor definition. This will come in handy when actor definitions are required from other module files.\r\n\r\n`contextCallback` will be called with `actorDefinition` object as in:\r\n> **contextCallback**(**actorDefinition**:*ActorDefinition*)\r\n\r\nExample of using `contextCallback` to split `\"guest\"` actor definitions from `\"system\"`.\r\n\r\nfile: **/my-auth-website/index.js**\r\n```javascript\r\n\r\nrequire(\"use-case\").\r\n\tsystem(\"My Auth Website\").\r\n        as(\"guest\", require(\"./actor/guest.js\"));\r\n```\r\n\r\nfile: **/my-auth-website/actor/guest.js**\r\n```javascript\r\nfunction defineActor(asGuest) {\r\n    asGuest.\r\n        accessing(\"public area\").\r\n            can(\"visit web pages\").\r\n                soThat(\"I will have an overview of the system.\").\r\n\r\n            can(\"login\").\r\n                soThat(\"I can change role and further control the system\");\r\n};\r\n\r\nmodule.exports = defineActor;\r\n```\r\n\r\n#### systemDefinition.subject(subjectName:*String*, [contextCallback:*Function*]):*SubjectDefinition*\r\n\r\nCreates Subject namespace if specified `subjectName` subject do not exist and returns `subjectDefinition` object for chain-calling subject definitions.\r\n\r\n`contextCallback` will be called with `subjectDefinition` object as in:\r\n> **contextCallback**(**subjectDefinition**:*SubjectDefinition*)\r\n\r\n#### systemDefinition.activity(subject:*String*, usecase:*String*, [contextCallback:*Function*]):*ActivityDefinition*\r\n\r\nCreates Subject and Use-case specified by `subject` and `usecase` parameters if they do not exist and returns [Apptivity](https://www.npmjs.com/package/apptivity#workflownamestringsessionapi) workflow definition object to further detail the Use-case activity.\r\n\r\n`contextCallback` will be called with `workflowActivity`, `subject` and `usecase` as in:\r\n> **contextCallback**(**workflowActivity**:*Activity*, **subject**:*String*, **usecase**:*String*)\r\n\r\n### Actor Definition Object\r\n\r\n#### actorDefinition.emulating(actor:*String*, [actor:*String*, ...]):*ActorDefinition*\r\n\r\nGeneralize Actor by inheriting Use-cases specified by `actor` parameters.\r\n\r\n#### actorDefinition.accessing(subjectName:*String*, [contextCallback:*Function*]):*ActorDefinition*\r\n\r\nCreates Subject namespace if specified `subjectName` subject do not exist and changes the default Subject context specified by `subjectName` parameter for the next Use-case chain-definitions. It returns `actorDefinition` object for chain-calling actor definitions.\r\n\r\n`contextCallback` will be called with `actorDefinition` object as in:\r\n> **contextCallback**(**actorDefinition**:*ActorDefinition*)\r\n\r\n#### actorDefinition.can(usecase:*String*, [contextCallback:*Function*]):*ActorDefinition*\r\n\r\nCreates Use-case within the default Subject context if specified `usecase` do not exist and returns `actorDefinition` object for chain-calling actor or use-case definitions.\r\n\r\n> **Warning!** calling this method without defining default Subject context with `actorDefinition.accessing(subjectName)` will result in a fatal error\r\n\r\n`contextCallback` will be called with `actorDefinition` object as in:\r\n> **contextCallback**(**actorDefinition**:*ActorDefinition*)\r\n\r\n\r\n#### actorDefinition.soThat([description:*String*, ...]]):*ActorDefinition*\r\n\r\nDescribes the currently defined Use-case with `description` parameters for documentation purposes.\r\n\r\n> **Warning!** calling this method without defining default Subject and Use-case context with `actorDefinition.accessing(subjectName)` and `actorDefinition.can(usecase)` will result in a fatal error\r\n\r\n### Subject Definition Object\r\n\r\n#### subjectDefinition.usecase(usecase:*String*, [contextCallback:*Function*]):*SubjectDefinition*\r\n\r\n#### subjectDefinition.extend([subject:*String*,] usecase:*String*, [condition:*Function*]]):*SubjectDefinition*\r\n\r\n#### subjectDefinition.include([subject:*String*,] usecase:*String*):*SubjectDefinition*\r\n\r\n#### subjectDefinition.generalize([subject:*String*,] usecase:*String*):*SubjectDefinition*\r\n\r\n### Process Object\r\n\r\n#### process.info(propertyName:*String*):*Mixed*\r\n\r\n#### process.currentState():*Object|null*\r\n\r\n#### process.run(data:*Mixed*):*Promise*\r\n\r\n#### process.runOnce(data:*Mixed*):*Promise*\r\n\r\n#### process.reset():*Process*\r\n\r\n#### process.current():*Process*\r\n\r\n#### process.previous():*Process*\r\n\r\n#### process.next():*Process*\r\n\r\n#### process.subscribe(event:*String|RegExp*, handler:*Function*):*Function*\r\n\r\n#### process.answer(input:*Mixed*):*Process*\r\n\r\n#### process.destroy():*Process*\r\n\r\n(To be continued... very sleepy!)\r\n\r\n## License\r\n\r\n[MIT](https://opensource.org/licenses/MIT)\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}